# 開発ガイド詳細

## 開発環境・品質管理ツール選定

- **コードフォーマット・Lint:** Biomeを採用し、非対応ファイル（markdown, html, json）のみPrettierでフォーマット
- **エディタ共通設定:** EditorConfig（一般的なルールで生成）
- **ビルドツール:** プロジェクト構成に適したものをClaude Codeにて選定
- **テストフレームワーク:** プロジェクト構成に適したものをClaude Codeにて選定

## 開発ガイドライン

- コードを追加・変更する際は、以下の各ステップでコミットを分けてください：

  1. **仕様検討・合意フェーズ（実装前必須）**:
     - **要求分析**: 「なぜこの機能が必要か？」「どんな問題を解決するか？」を明確化
     - **リスク検討**: 「既存機能への影響は？」「パフォーマンス問題は？」「セキュリティ懸念は？」
     - **代替案検討**: 「他の実装方法はないか？」「よりシンプルな解決策は？」
     - **影響範囲分析**: 「どのテストが影響を受けるか？」「どのファイルを変更するか？」
     - **必須確認事項**: 上記検討結果をユーザーに説明し、合意を得てから実装開始
  2. 対象のテストがなければ追加する。この段階ではエラーになってかまわない（TDD）
  3. テストが通るように機能を実装し、ユーザーに報告する。ユーザーとの会話で調整された仕様があれば、ドキュメントに反映する。

- **テスト品質保証の原則（必須）**: 
  - **タスク完了時点でテストが100%通過していることが必須条件**
  - 新機能追加時は既存テストが破綻していないかチェックする
  - テスト失敗が発生した場合は**原因を特定して修正する**（skip/commentアウト禁止）
  - 修正困難な場合は**必ずユーザーに相談**し、仕様の妥当性を確認する
  - **テストが通らない状態での「こっそり完了」は絶対禁止**
  - テスト問題の隠蔽ではなく、透明性のある報告と解決を最優先とする
- タスクはコンテキストではなくCLAUDE.mdで管理する（CLAUDE.mdから次のタスクを選定し、必要に応じて分割する）
- テストはできるだけシンプルかつ高速を目指す。例：DB状態に関連したロジックテストはできるだけ単体テストに切り離し、E2Eテストはロジックを意図した引数で呼んでいるかの確認に留める
- テスト内容を調整する際は、それがテストの目的と照らして正しいかを客観的に考える。例：アプリ利用時の操作を再現するためではなく、失敗するテストを通すためだけにUI要素を操作するのはNG。

## ミニマム要件

### データ管理機能

- **アプリ起動時**: CSV（`csv/`）からSQLiteへの自動読込・復元
- **作業中**: SQLite DBによる高速な読み書き・検索
- **確定時**: SQLiteからCSV（`csv/`）への完全出力（games.csv、categories.csv、game-\*.csv）

### UI機能

- ワードの一覧表示・検索
- ワード単位の登録・編集UIと即時DB反映（インライン編集・自動保存）
- CSV確定をトリガーする「Git管理用CSV出力」UI
- 辞書登録用CSVへのフォーマット変換・出力（Google・MS-IME・ATOK対応）

## 最終要件（拡張案）

- E2Eテスト・自動化CI導入
- ゲームごとに別の辞書として扱う切り替えUI
- 辞書登録用CSVの対応形式追加

## タスク大分類

1. 環境構築・セットアップ
2. 仕様ドキュメントの整備（特にテーブル構成に関わる部分）
3. SQLite DB設計・マイグレーション実装
4. CSV入出力機能（インポート・エクスポート）
5. Electron UI基本画面（一覧、編集、絞り込み）
6. 編集内容の即時SQLite反映処理
7. 確定操作によるCSV更新機能実装
8. 辞書登録用CSVの出力処理
9. Git連携ルール整備（.gitignore設定含む）
10. テストコード整備（単体テスト・E2E）

## 参考技術情報

- Electron: https://www.electronjs.org/
- csv-parse / csv-stringify: https://csv.js.org/parse/
- Biome: https://biomejs.dev/
- EditorConfig: https://editorconfig.org/
- MIT Licenseについて: https://opensource.org/licenses/MIT

## 連絡・フィードバック方法

- CLAUDE.mdに記載の指示に沿って出力されたタスク案をレビュー
- 不足・修正点をコメントにて返送
- 会話で決定した内容は随時仕様書やコード内コメント、CLAUDE.mdに反映する（コンテキストに依存しすぎない）